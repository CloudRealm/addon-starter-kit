!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("ng.common"),require("tslib"),require("ng.router"),require("rxjs"),require("ng.core"),require("ionic.angular")):"function"==typeof define&&define.amd?define(["ng.common","tslib","ng.router","rxjs","ng.core","ionic.angular"],e):"object"==typeof exports?exports["plugin.my-plugin"]=e(require("ng.common"),require("tslib"),require("ng.router"),require("rxjs"),require("ng.core"),require("ionic.angular")):t["plugin.my-plugin"]=e(t["ng.common"],t.tslib,t["ng.router"],t.rxjs,t["ng.core"],t["ionic.angular"])}("undefined"!=typeof self?self:this,function(t,e,n,r,o,i){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,(function(e){return t[e]}).bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}({0:function(t,e,n){t.exports=n("zUnb")},"0S4P":function(e,n){e.exports=t},"17wl":function(t,n){t.exports=e},JAnZ:function(t,e){t.exports=n},Vgaj:function(t,e){t.exports=r},vOrQ:function(t,e){t.exports=o},z1lQ:function(t,e){t.exports=i},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("17wl");function o(t){return"function"==typeof t}var i=!1,s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function u(t){setTimeout(function(){throw t},0)}var a={closed:!0,next:function(t){},error:function(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;u(t)},complete:function(){}},c=Array.isArray||function(t){return t&&"number"==typeof t.length};function l(t){return null!==t&&"object"==typeof t}function h(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}h.prototype=Object.create(Error.prototype);var f=h,p=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var s=0;s<n.length;++s)n[s].remove(this);if(o(r))try{r.call(this)}catch(h){e=h instanceof f?d(h.errors):[h]}if(c(i)){s=-1;for(var u=i.length;++s<u;){var a=i[s];if(l(a))try{a.unsubscribe()}catch(h){e=e||[],h instanceof f?e=e.concat(d(h.errors)):e.push(h)}}}if(e)throw new f(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var o=n._parentOrParents;if(null===o)n._parentOrParents=this;else if(o instanceof t){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=((e=new t).closed=!0,e),t}();function d(t){return t.reduce(function(t,e){return t.concat(e instanceof f?e.errors:e)},[])}var b="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),g=function(t){function e(n,r,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=a;break;case 1:if(!n){i.destination=a;break}if("object"==typeof n){n instanceof e?(i.syncErrorThrowable=n.syncErrorThrowable,i.destination=n,n.add(i)):(i.syncErrorThrowable=!0,i.destination=new y(i,n));break}default:i.syncErrorThrowable=!0,i.destination=new y(i,n,r,o)}return i}return r.__extends(e,t),e.prototype[b]=function(){return this},e.create=function(t,n,r){var o=new e(t,n,r);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(p),y=function(t){function e(e,n,r,i){var s,u=t.call(this)||this;u._parentSubscriber=e;var c=u;return o(n)?s=n:n&&(s=n.next,r=n.error,i=n.complete,n!==a&&(o((c=Object.create(n)).unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=s,u._error=r,u._complete=i,u}return r.__extends(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=s.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):u(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;u(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;u(n)}},e.prototype.__tryOrSetError=function(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(u(r),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(g);function v(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new m(t,e))}}var m=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new _(t,this.project,this.thisArg))},t}(),_=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return r.__extends(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(g),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(g),x=function(t){function e(e,n,r){var o=t.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=r,o.index=0,o}return r.__extends(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(g);function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var S=E(),T="function"==typeof Symbol&&Symbol.observable||"@@observable";var j=function(t){if(t&&"function"==typeof t[T])return i=t,function(t){var e=i[T]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((e=t)&&"number"==typeof e.length&&"function"!=typeof e)return o=t,function(t){for(var e=0,n=o.length;e<n&&!t.closed;e++)t.next(o[e]);t.complete()};var e;if(function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}(t))return r=t,function(t){return r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,u),t};if(t&&"function"==typeof t[S])return n=t,function(t){for(var e=n[S]();;){var r=e.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof e.return&&t.add(function(){e.return&&e.return()}),t};var n,r,o,i,s=l(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+s+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function O(){}function C(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return L(t)}function L(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:O}var P=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,o=function(t,e,n){if(t){if(t instanceof g)return t;if(t[b])return t[b]()}return t||e||n?new g(t,e,n):new g(a)}(t,e,n);if(o.add(r?r.call(o,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),s.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof g?e:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=D(e))(function(e,r){var o;o=n.subscribe(function(e){try{t(e)}catch(n){r(n),o&&o.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[T]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:L(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=D(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function D(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function k(t,e,n,r,o){if(void 0===o&&(o=new x(t,n,r)),!o.closed)return e instanceof P?e.subscribe(o):j(e)(o)}function A(t){return function(e){var n=new q(t),r=e.lift(n);return n.caught=r}}var q=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new R(t,this.selector,this.caught))},t}(),R=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.selector=n,o.caught=r,o}return r.__extends(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(o){return void t.prototype.error.call(this,o)}this._unsubscribeAndRecycle();var r=new x(this,void 0,void 0);this.add(r),k(this,n,void 0,void 0,r)}},e}(w),M=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.__extends(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(o){n=!0,r=!!o&&o||new Error(o)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.__extends(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(p)),I=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),N=new(function(t){function e(n,r){void 0===r&&(r=I.now);var o=t.call(this,n,function(){return e.delegate&&e.delegate!==o?e.delegate.now():r()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.__extends(e,t),e.prototype.schedule=function(n,r,o){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,o):t.prototype.schedule.call(this,n,r,o)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(I))(M);function V(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}V.prototype=Object.create(Error.prototype);var U=V,H=function(){function t(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new F(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),F=function(t){function e(e,n,r,o,i){var s=t.call(this,e)||this;return s.absoluteTimeout=n,s.waitFor=r,s.withObservable=o,s.scheduler=i,s.action=null,s.scheduleTimeout(),s}return r.__extends(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(k(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(w);function B(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}B.prototype=Object.create(Error.prototype);var W=B,z=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r.__extends(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(p),Q=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r.__extends(e,t),e}(g),J=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r.__extends(e,t),e.prototype[b]=function(){return new Q(this)},e.prototype.lift=function(t){var e=new K(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new W;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new W;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new W;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new W;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new W;return this.hasError?(t.error(this.thrownError),p.EMPTY):this.isStopped?(t.complete(),p.EMPTY):(this.observers.push(t),new z(this,t))},e.prototype.asObservable=function(){var t=new P;return t.source=this,t},e.create=function(t,e){return new K(t,e)},e}(P),K=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r.__extends(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):p.EMPTY},e}(J);function Y(){return function(t){return t.lift(new $(t))}}var $=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new G(t,n),o=e.subscribe(r);return r.closed||(r.connection=n.connect()),o},t}(),G=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.__extends(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(g),Z=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.__extends(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new p).add(this.source.subscribe(new tt(this.getSubject(),this))),t.closed&&(this._connection=null,t=p.EMPTY)),t},e.prototype.refCount=function(){return Y()(this)},e}(P).prototype,X={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:Z._subscribe},_isComplete:{value:Z._isComplete,writable:!0},getSubject:{value:Z.getSubject},connect:{value:Z.connect},refCount:{value:Z.refCount}},tt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.__extends(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(Q);function et(){return new J}function nt(){return function(t){return Y()((e=et,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,X);return r.source=t,r.subjectFactory=n,r})(t));var e}}var rt=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new ot(t,this.callback))},t}(),ot=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new p(n)),r}return r.__extends(e,t),e}(g);function it(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}it.prototype=Object.create(Error.prototype);var st=it;function ut(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}ut.prototype=Object.create(Error.prototype);var at=ut,ct=new P(function(t){return t.complete()});function lt(t){return t?function(t){return new P(function(e){return t.schedule(function(){return e.complete()})})}(t):ct}function ht(t){return function(e){return 0===t?lt():e.lift(new ft(t))}}var ft=function(){function t(t){if(this.total=t,this.total<0)throw new at}return t.prototype.call=function(t,e){return e.subscribe(new pt(t,this.total))},t}(),pt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.__extends(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(g);function dt(t){return void 0===t&&(t=null),function(e){return e.lift(new bt(t))}}var bt=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new gt(t,this.defaultValue))},t}(),gt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r.__extends(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(g),yt=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,e){return e.subscribe(new vt(t,this.errorFactory))},t}(),vt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.errorFactory=n,r.hasValue=!1,r}return r.__extends(e,t),e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},e}(g);function mt(){return new st}function _t(t){return t}var wt=n("Vgaj"),xt=function(){function t(){}return t.prototype.setMovie=function(t){},t}(),Et=function(){return function(){}}(),St=function(){function t(){}return t.setStorageEngine=function(t){this._storageEngine=t},Object.defineProperty(t,"storageEngine",{get:function(){if(!this._storageEngine)throw new Error("WakoCacheService: Storage Engine has not been set");return this._storageEngine},enumerable:!0,configurable:!0}),t.serialize=function(t,e){return JSON.stringify({data:t,expiresAt:e})},t.unSerialize=function(t){try{return JSON.parse(t)}catch(e){return null}},t.hasExpired=function(t){return t.expiresAt<Date.now()},t.getCacheObject=function(t){var e=this;return Object(wt.from)(this.storageEngine.get(t)).pipe(v(function(n){var r=e.unSerialize(n);return null===r?null:{data:r.data,hasExpired:e.hasExpired(r),key:t}}))},t.get=function(t){var e=this;return this.getCacheObject(t).pipe(v(function(n){return null===n?null:n.hasExpired?(console.log("key",t,"has expired"),e.remove(n.key),null):n.data}))},t.set=function(t,e,n){var r=new Date;return"number"==typeof n?r.setTime(r.getTime()+n):"string"==typeof n&&("tomorrow"===n?(r.setHours(23),r.setMinutes(59),r.setSeconds(59)):n.match("min")?r.setMinutes(r.getMinutes()+parseFloat(n)):n.match("h")?r.setHours(r.getHours()+parseFloat(n)):n.match("d")?r.setDate(r.getDate()+parseFloat(n)):n.match("m")&&r.setMonth(r.getMonth()+parseFloat(n))),this.storageEngine.set(t,this.serialize(e,r.getTime())).catch(function(t){console.log({err:t})})},t.remove=function(t){return this.storageEngine.remove(t)},t.clear=function(){return console.log("WakoCacheService clear"),this.storageEngine.clear()},t.prune=function(){return t=this,n=function(){var t,e,n;return function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,function(r){switch(r.label){case 0:return console.log("WakoCacheService prune"),[4,this.storageEngine.keys()];case 1:t=r.sent(),e=0,n=t,r.label=2;case 2:return e<n.length?[4,this.get(n[e]).toPromise()]:[3,5];case 3:r.sent(),r.label=4;case 4:return e++,[3,2];case 5:return[2]}})},new((e=void 0)||(e=Promise))(function(r,o){function i(t){try{u(n.next(t))}catch(e){o(e)}}function s(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){t.done?r(t.value):new e(function(e){e(t.value)}).then(i,s)}u((n=n.apply(t,[])).next())});var t,e,n},t}();function Tt(t,e){console.log((new Date).toISOString()+" - ["+t+"]: "+e)}var jt=function(){function t(){}return t.request=function(t){var e=this;return(this.isMobileDevice?this.mobileRequest(t).pipe(A(function(n){return n instanceof Ot&&301===n.status?(Tt("WakoHttpService","Re Run "+t.url),e.mobileRequest(t)):Object(wt.throwError)(n)})):this.browserRequest(t)).pipe(v(function(e){if(e.status>=200&&e.status<=299)return e;throw new Ot(t,e.status,e.responseType,e.response)}))},t.mobileRequest=function(t){return Object(wt.defer)(function(){var e=t.headers["Content-Type"],n="json";return e&&(t.headers["content-type"]=t.headers["Content-Type"],"application/x-www-form-urlencoded"===e&&(n="urlencoded","string"==typeof t.body&&(n="utf8"))),cordova.plugin.http.setDataSerializer(n),new Promise(function(e,n){var r=function(n){var r={request:t,responseText:n.data,status:n.status,responseType:t.responseType,response:n};try{r.response="json"===r.responseType?JSON.parse(n.data):n.data}catch(o){r.response=n.data}e(r)},o=function(e){n(new Ot(t,e.status,t.responseType,e.error))};if("GET"===t.method)cordova.plugin.http.get(t.url,{},t.headers,r,o);else if("POST"===t.method)null===t.body&&(t.body={}),cordova.plugin.http.post(t.url,t.body,t.headers,r,o);else{if("DELETE"!==t.method)throw new Error("httpRequest.method  not set");cordova.plugin.http.delete(t.url,t.body,t.headers,r,o)}})})},t.browserRequest=function(t){var e=new Headers;return t.headers&&Object.keys(t.headers).forEach(function(n){e.set(n,t.headers[n])}),Object(wt.defer)(function(){var n=null;if(t.body)if("application/x-www-form-urlencoded"===t.headers["Content-Type"]){if(t.body){var r=new URLSearchParams;Object.keys(t.body).forEach(function(e){r.set(e,t.body[e])}),n=r.toString()}}else n=JSON.stringify(t.body);return fetch(t.url,{method:t.method,body:n,headers:e}).then(function(e){var n={request:t,responseText:null,status:e.status,responseType:t.responseType,response:e},r=e.headers.get("content-type");return r&&r.includes("application/json")?e.json().then(function(t){return n.response=t,n}):e.text().then(function(e){try{n.response="json"===t.responseType&&e.length>0?JSON.parse(e):e}catch(r){n.response=e}return n})},function(e){throw new Ot(t,e.status,t.responseType,e.error)})})},t.addParamsToUrl=function(t,e){if(e){var n=new URLSearchParams("");for(var r in e)e[r]&&n.set(r,e[r]);t+=(t.match(/\?/)?"&":"?")+decodeURIComponent(n.toString())}return t},t}(),Ot=function(){return function(t,e,n,r){this.request=t,this.status=e,this.responseType=n,this.response=r}}(),Ct=function(){function t(){}return t.getQueueItemsByDomain=function(t){return this.domainQueueItems.has(t)||this.domainQueueItems.set(t,[]),this.domainQueueItems.get(t)},t.getCacheService=function(){return St},t.getTimeToWaitOnTooManyRequest=function(){return 5e3},t.getTimeToWaitBetweenEachRequest=function(){return 0},t.getSimultaneousRequest=function(){return 1},t.getApiBaseUrl=function(){return""},t.setToken=function(t){this.token=t},t.getToken=function(){return this.token},t.getHeaders=function(){return{}},t.unHandleError=function(t){if(t instanceof Ot)console.error("Unhandled error: "+t.status+" "+t.request.method+" "+t.request.url);else if(t&&"TimeoutError"===t.name)return wt.EMPTY;return Object(wt.throwError)(t)},t.getObservableKey=function(t,e){void 0===e&&(e=!1);var n=e&&t.headers&&Object.keys(t.headers).length>0?"_h:"+JSON.stringify(t.headers):"",r=t.body&&Object.keys(t.body).length>0?"_b:"+JSON.stringify(t.body):"";return t.method+"::"+t.url+n+r},t.request=function(t,e,n,r,o,i){var s=this;void 0===n&&(n=1e4),void 0===r&&(r=!1),t.headers||(t.headers=this.getHeaders()),t.responseType||(t.responseType="json"),o=o||this.getTimeToWaitOnTooManyRequest(),i=i||this.getTimeToWaitBetweenEachRequest();var u=t.url.replace(/http(s)?:\/\//gi,"").split("/")[0],a=this.getObservableKey(t,!0),c=this.getObservableKey(t),l=this.observableRequests.get(a);return l||(l=new wt.Observable(function(r){var a=Object(wt.of)(null);e&&(a=s.getCacheService().getCacheObject(c)),a.subscribe(function(a){if(null!==a&&!1===a.hasExpired)return r.next(a.data),void r.complete();var l,h,f=jt.request(t).pipe((void 0===l&&(l=N),function(t,e,n){return void 0===n&&(n=N),function(r){var o,i=(o=t)instanceof Date&&!isNaN(+o),s=i?+t-n.now():Math.abs(t);return r.lift(new H(s,i,e,n))}}(n,(h=new U,new P(function(t){return t.error(h)})),l)),v(function(t){return e&&s.getCacheService().set(c,t.response,e),t.response}),A(function(e){return a?(console.log("Server error",e.status,t.url,"but cache exists, returns it",a.data),Object(wt.of)(a.data)):429===e.status?(s.queueEnabled?(s.addToQueue(u,r,f,t.url),console.log("Gonna wait",o,"ms before continue, on domain",u),Object(wt.timer)(o).subscribe(function(){console.log("RUN NEXT",u),s.runNext(u,i)})):console.log("Queue is disabled do nothing"),wt.NEVER):Object(wt.throwError)(e)}));s.queueEnabled?(s.addToQueue(u,r,f,t.url),s.getQueueItemsByDomain(u).length<=s.getSimultaneousRequest()&&s.runNext(u,i)):f.subscribe(function(t){r.next(t),r.complete()},function(t){r.error(t)})})}).pipe(nt(),A(function(t){return"function"==typeof s.handleError?s.handleError(t):s.unHandleError(t)})),this.observableRequests.set(a,l)),l},t.addToQueue=function(t,e,n,r){this.getQueueItemsByDomain(t).push({observer:e,observable:n,url:r})},t.runNext=function(t,e){var n,r=this,o=this.getQueueItemsByDomain(t);if(o.length>0){var i=o[0];o.shift(),i.observable.pipe((n=function(){setTimeout(function(){r.runNext(t,e)},e)},function(t){return t.lift(new rt(n))})).subscribe(function(t){i.observer.next(t),i.observer.complete()},function(t){i.observer.error(t)})}},t.get=function(t,e,n,r){return void 0===r&&(r=1e4),this.request({url:this.getApiBaseUrl()+jt.addParamsToUrl(t,e),method:"GET"},n,r)},t.post=function(t,e,n,r){return void 0===r&&(r=1e4),this.request({url:this.getApiBaseUrl()+t,method:"POST",body:e},n,r)},t.put=function(t,e,n,r){return void 0===r&&(r=1e4),this.request({url:this.getApiBaseUrl()+t,method:"PUT",body:e},n,r)},t.delete=function(t,e,n,r){return void 0===r&&(r=1e4),this.request({url:this.getApiBaseUrl()+t,method:"DELETE",body:e},n,r)},t}();Ct.observableRequests=new Map,Ct.domainQueueItems=new Map,Ct.queueEnabled=!1,Ct.handleError=null;var Lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.getApiBaseUrl=function(){return this.apiBaseUrl},e.handleError=function(t){return console.log("Error on kodi",t),wt.NEVER},e.setHost=function(t){this.host=t,this.apiBaseUrl="http://"+t.host+":"+t.port+"/jsonrpc"},e.getHeaders=function(){var t={"Content-Type":"application/json"};return this.host&&this.host.login&&(t.Authorization="Basic "+btoa(this.host.login+":"+this.host.password)),t},e.doAction=function(t,e,n){void 0===n&&(n=2e3);var r={jsonrpc:"2.0",id:1,method:t};return e&&(r.params=e),this.post("?"+t,r,null,n).pipe(v(function(t){return t.result}))},e}(Ct);Lt.apiBaseUrl="",Lt.byPassCors=!0;var Pt=function(){function t(){}return t.connect=function(t,e){var n=this,r="ws://"+t.host+":"+(t.wsPort?t.wsPort:9090)+"/jsonrpc";return this.disconnect(),this.currentWebSocket=new WebSocket(r),this.currentWebSocket.onopen=function(){e.run(function(){n.connected$.next(!0),n.isConnected=!0,console.log("Connected to",r)})},this.currentWebSocket.onclose=function(){e.run(function(){n.isConnected=!1,n.connected$.next(!1),console.log("disconnected to",r)})},this.currentWebSocket.onmessage=function(t){e.run(function(){n.wsMessage$.next(JSON.parse(t.data))})},this.currentWebSocket},t.disconnect=function(){this.isConnected=!1,this.currentWebSocket&&(this.currentWebSocket.close(),this.currentWebSocket=null),this.connected$.next(!1)},t.send=function(t,e){var n={jsonrpc:"2.0",id:1,method:t};return e&&(n.params=e),this.currentWebSocket.send(JSON.stringify(n)),this.wsMessage$.pipe(function(t,e){var n=arguments.length>=2;return function(t){return t.pipe(_t,ht(1),n?dt(void 0):(void 0===(e=function(){return new st})&&(e=mt),function(t){return t.lift(new yt(e))}));var e}}())},t}();Pt.wsMessage$=new wt.Subject,Pt.connected$=new wt.ReplaySubject(1),Pt.isConnected=!1;var Dt=function(){function t(){}return t.prototype.initialize=function(){},t.prototype.setTranslation=function(t,e){},t}(),kt=n("vOrQ");function At(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new qt(t,e,n))}}var qt=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new Rt(t,this.accumulator,this.seed,this.hasSeed))},t}(),Rt=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.accumulator=n,i._seed=r,i.hasSeed=o,i.index=0,i}return r.__extends(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)},e}(g);function Mt(t){return function(e){return 0===t?lt():e.lift(new It(t))}}var It=function(){function t(t){if(this.total=t,this.total<0)throw new at}return t.prototype.call=function(t,e){return e.subscribe(new Nt(t,this.total))},t}(),Nt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r.__extends(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,o=0;o<n;o++){var i=e++%n;t.next(r[i])}t.complete()},e}(g);function Vt(t,e,n){return 0===n?[e]:(t.push(e),t)}var Ut=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new Ht(t,this.project))},t}(),Ht=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return r.__extends(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var o=new x(this,void 0,void 0);this.destination.add(o),this.innerSubscription=k(this,t,e,n,o)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,o){this.destination.next(e)},e}(w),Ft=function(){return function(){}}(),Bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.getTranslation=function(t){return Object(wt.of)({})},e}(Ft),Wt=function(){return function(){}}(),zt=function(){function t(){}return t.prototype.handle=function(t){return t.key},t}(),Qt=function(){return function(){}}(),Jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(e,t),e.prototype.compile=function(t,e){return t},e.prototype.compileTranslations=function(t,e){return t},e}(Qt);function Kt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,o,i=typeof t;if(i==typeof e&&"object"==i){if(!Array.isArray(t)){if(Array.isArray(e))return!1;for(r in o=Object.create(null),t){if(!Kt(t[r],e[r]))return!1;o[r]=!0}for(r in e)if(!(r in o)&&void 0!==e[r])return!1;return!0}if(!Array.isArray(e))return!1;if((n=t.length)==e.length){for(r=0;r<n;r++)if(!Kt(t[r],e[r]))return!1;return!0}}return!1}function Yt(t){return null!=t}function $t(t){return t&&"object"==typeof t&&!Array.isArray(t)}var Gt=function(){return function(){}}(),Zt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g,e}return Object(r.__extends)(e,t),e.prototype.interpolate=function(t,e){return"string"==typeof t?this.interpolateString(t,e):"function"==typeof t?this.interpolateFunction(t,e):t},e.prototype.getValue=function(t,e){var n=e.split(".");e="";do{e+=n.shift(),!Yt(t)||!Yt(t[e])||"object"!=typeof t[e]&&n.length?n.length?e+=".":t=void 0:(t=t[e],e="")}while(n.length);return t},e.prototype.interpolateFunction=function(t,e){return t(e)},e.prototype.interpolateString=function(t,e){var n=this;return e?t.replace(this.templateMatcher,function(t,r){var o=n.getValue(e,r);return Yt(o)?o:t}):t},e}(Gt),Xt=function(){return function(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new kt.EventEmitter,this.onLangChange=new kt.EventEmitter,this.onDefaultLangChange=new kt.EventEmitter}}(),te=new kt.InjectionToken("USE_STORE"),ee=new kt.InjectionToken("USE_DEFAULT_LANG"),ne=function(){function t(t,e,n,r,o,i,s){void 0===i&&(i=!0),void 0===s&&(s=!1),this.store=t,this.currentLoader=e,this.compiler=n,this.parser=r,this.missingTranslationHandler=o,this.useDefaultLang=i,this.isolate=s,this.pending=!1,this._onTranslationChange=new kt.EventEmitter,this._onLangChange=new kt.EventEmitter,this._onDefaultLangChange=new kt.EventEmitter,this._langs=[],this._translations={},this._translationRequests={}}return Object.defineProperty(t.prototype,"onTranslationChange",{get:function(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onLangChange",{get:function(){return this.isolate?this._onLangChange:this.store.onLangChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDefaultLangChange",{get:function(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultLang",{get:function(){return this.isolate?this._defaultLang:this.store.defaultLang},set:function(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLang",{get:function(){return this.isolate?this._currentLang:this.store.currentLang},set:function(t){this.isolate?this._currentLang=t:this.store.currentLang=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"langs",{get:function(){return this.isolate?this._langs:this.store.langs},set:function(t){this.isolate?this._langs=t:this.store.langs=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"translations",{get:function(){return this.isolate?this._translations:this.store.translations},set:function(t){this.isolate?this._translations=t:this.store.translations=t},enumerable:!0,configurable:!0}),t.prototype.setDefaultLang=function(t){var e=this;if(t!==this.defaultLang){var n=this.retrieveTranslations(t);void 0!==n?(this.defaultLang||(this.defaultLang=t),n.pipe(ht(1)).subscribe(function(n){e.changeDefaultLang(t)})):this.changeDefaultLang(t)}},t.prototype.getDefaultLang=function(){return this.defaultLang},t.prototype.use=function(t){var e=this;if(t===this.currentLang)return Object(wt.of)(this.translations[t]);var n=this.retrieveTranslations(t);return void 0!==n?(this.currentLang||(this.currentLang=t),n.pipe(ht(1)).subscribe(function(n){e.changeLang(t)}),n):(this.changeLang(t),Object(wt.of)(this.translations[t]))},t.prototype.retrieveTranslations=function(t){var e;return void 0===this.translations[t]&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),e=this._translationRequests[t]),e},t.prototype.getTranslation=function(t){var e=this;this.pending=!0;var n=this.currentLoader.getTranslation(t).pipe(nt());return this.loadingTranslations=n.pipe(ht(1),v(function(n){return e.compiler.compileTranslations(n,t)}),nt()),this.loadingTranslations.subscribe(function(n){e.translations[t]=n,e.updateLangs(),e.pending=!1},function(t){e.pending=!1}),n},t.prototype.setTranslation=function(t,e,n){void 0===n&&(n=!1),e=this.compiler.compileTranslations(e,t),this.translations[t]=n&&this.translations[t]?function t(e,n){var r=Object.assign({},e);return $t(e)&&$t(n)&&Object.keys(n).forEach(function(o){var i,s;$t(n[o])?o in e?r[o]=t(e[o],n[o]):Object.assign(r,((i={})[o]=n[o],i)):Object.assign(r,((s={})[o]=n[o],s))}),r}(this.translations[t],e):e,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})},t.prototype.getLangs=function(){return this.langs},t.prototype.addLangs=function(t){var e=this;t.forEach(function(t){-1===e.langs.indexOf(t)&&e.langs.push(t)})},t.prototype.updateLangs=function(){this.addLangs(Object.keys(this.translations))},t.prototype.getParsedResult=function(t,e,n){var o,i,s,u,a;if(e instanceof Array){var c={},l=!1;try{for(var h=Object(r.__values)(e),f=h.next();!f.done;f=h.next())c[g=f.value]=this.getParsedResult(t,g,n),"function"==typeof c[g].subscribe&&(l=!0)}catch(_){o={error:_}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}if(l){var p=void 0;try{for(var d=Object(r.__values)(e),b=d.next();!b.done;b=d.next()){var g,y="function"==typeof c[g=b.value].subscribe?c[g]:Object(wt.of)(c[g]);p=void 0===p?y:Object(wt.merge)(p,y)}}catch(w){s={error:w}}finally{try{b&&!b.done&&(u=d.return)&&u.call(d)}finally{if(s)throw s.error}}return p.pipe(function(t,e){return arguments.length>=2?function(n){return C(At(t,e),Mt(1),dt(e))(n)}:function(e){return C(At(function(e,n,r){return t(e,n,r+1)}),Mt(1))(e)}}(Vt,[]),v(function(t){var n={};return t.forEach(function(t,r){n[e[r]]=t}),n}))}return c}if(t&&(a=this.parser.interpolate(this.parser.getValue(t,e),n)),void 0===a&&this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(a=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],e),n)),void 0===a){var m={key:e,translateService:this};void 0!==n&&(m.interpolateParams=n),a=this.missingTranslationHandler.handle(m)}return void 0!==a?a:e},t.prototype.get=function(t,e){var n=this;if(!Yt(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return wt.Observable.create(function(r){var o=function(t){r.next(t),r.complete()},i=function(t){r.error(t)};n.loadingTranslations.subscribe(function(r){"function"==typeof(r=n.getParsedResult(r,t,e)).subscribe?r.subscribe(o,i):o(r)},i)});var r=this.getParsedResult(this.translations[this.currentLang],t,e);return"function"==typeof r.subscribe?r:Object(wt.of)(r)},t.prototype.stream=function(t,e){var n=this;if(!Yt(t)||!t.length)throw new Error('Parameter "key" required');return Object(wt.concat)(this.get(t,e),this.onLangChange.pipe(function t(e,n){return"function"==typeof n?function(r){return r.pipe(t(function(t,r){return(o=e(t,r),o instanceof P?o:new P(j(o))).pipe(v(function(e,o){return n(t,e,r,o)}));var o}))}:function(t){return t.lift(new Ut(e))}}(function(r){var o=n.getParsedResult(r.translations,t,e);return"function"==typeof o.subscribe?o:Object(wt.of)(o)})))},t.prototype.instant=function(t,e){if(!Yt(t)||!t.length)throw new Error('Parameter "key" required');var n=this.getParsedResult(this.translations[this.currentLang],t,e);if(void 0!==n.subscribe){if(t instanceof Array){var r={};return t.forEach(function(e,n){r[t[n]]=t[n]}),r}return t}return n},t.prototype.set=function(t,e,n){void 0===n&&(n=this.currentLang),this.translations[n][t]=this.compiler.compile(e,n),this.updateLangs(),this.onTranslationChange.emit({lang:n,translations:this.translations[n]})},t.prototype.changeLang=function(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),this.defaultLang||this.changeDefaultLang(t)},t.prototype.changeDefaultLang=function(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})},t.prototype.reloadLang=function(t){return this.resetLang(t),this.getTranslation(t)},t.prototype.resetLang=function(t){this._translationRequests[t]=void 0,this.translations[t]=void 0},t.prototype.getBrowserLang=function(){if("undefined"!=typeof window&&void 0!==window.navigator){var t=window.navigator.languages?window.navigator.languages[0]:null;return-1!==(t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage).indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t}},t.prototype.getBrowserCultureLang=function(){if("undefined"!=typeof window&&void 0!==window.navigator)return(window.navigator.languages?window.navigator.languages[0]:null)||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage},t}(),re=function(){function t(t,e){this.translate=t,this._ref=e,this.value=""}return t.prototype.updateValue=function(t,e,n){var r=this,o=function(e){r.value=void 0!==e?e:t,r.lastKey=t,r._ref.markForCheck()};if(n){var i=this.translate.getParsedResult(n,t,e);"function"==typeof i.subscribe?i.subscribe(o):o(i)}this.translate.get(t,e).subscribe(o)},t.prototype.transform=function(t){for(var e,n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(!t||0===t.length)return t;if(Kt(t,this.lastKey)&&Kt(r,this.lastParams))return this.value;if(Yt(r[0])&&r.length)if("string"==typeof r[0]&&r[0].length){var i=r[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{e=JSON.parse(i)}catch(s){throw new SyntaxError("Wrong parameter in TranslatePipe. Expected a valid Object, received: "+r[0])}}else"object"!=typeof r[0]||Array.isArray(r[0])||(e=r[0]);return this.lastKey=t,this.lastParams=r,this.updateValue(t,e),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(function(r){n.lastKey&&r.lang===n.translate.currentLang&&(n.lastKey=null,n.updateValue(t,e,r.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(function(r){n.lastKey&&(n.lastKey=null,n.updateValue(t,e,r.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(function(){n.lastKey&&(n.lastKey=null,n.updateValue(t,e))})),this.value},t.prototype._dispose=function(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)},t.prototype.ngOnDestroy=function(){this._dispose()},t}(),oe=function(){function t(){}return t.forRoot=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[e.loader||{provide:Ft,useClass:Bt},e.compiler||{provide:Qt,useClass:Jt},e.parser||{provide:Gt,useClass:Zt},e.missingTranslationHandler||{provide:Wt,useClass:zt},Xt,{provide:te,useValue:e.isolate},{provide:ee,useValue:e.useDefaultLang},ne]}},t.forChild=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[e.loader||{provide:Ft,useClass:Bt},e.compiler||{provide:Qt,useClass:Jt},e.parser||{provide:Gt,useClass:Zt},e.missingTranslationHandler||{provide:Wt,useClass:zt},{provide:te,useValue:e.isolate},{provide:ee,useValue:e.useDefaultLang},ne]}},t}(),ie=function(t){function e(e){var n=t.call(this)||this;return n.translate=e,n}return r.__extends(e,t),e.prototype.initialize=function(){console.log("Initialize plugin")},e.prototype.setTranslation=function(t,e){this.translate.setDefaultLang(t),this.translate.use(t),this.translate.setTranslation(t,e)},e.ngInjectableDef=kt.defineInjectable({factory:function(){return new e(kt.inject(ne))},token:e,providedIn:"root"}),e}(Dt),se=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.setMovie=function(t){this.movie=t},e.prototype.openMovie=function(){alert("Should open movie")},e}(xt),ue=n("z1lQ"),ae=function(){function t(t,e){this.modalCtrl=t,this.translate=e}return t.prototype.ngOnInit=function(){Tt("Test Addon","plopplop"),console.log("translate",this.translate.currentLang),console.log("translate",this.translate.instant("settings.title"))},t}(),ce=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.pluginService=ie,e.settingsComponent=ae,e.movieComponent=se,e}(Et),le=n("0S4P");n("JAnZ");var he=kt["\u0275crt"]({encapsulation:2,styles:[],data:{}});function fe(t){return kt["\u0275vid"](2,[kt["\u0275ncd"](null,0)],null,null)}var pe=kt["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function de(t){return kt["\u0275vid"](0,[(t()(),kt["\u0275eld"](0,0,null,null,2,"ion-button",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.openMovie()&&r),r},fe,he)),kt["\u0275did"](1,49152,null,0,ue.IonButton,[kt.ChangeDetectorRef,kt.ElementRef],null,null),(t()(),kt["\u0275ted"](2,0,[" My movie : "," ","\n"]))],null,function(t,e){var n=e.component;t(e,2,0,n.movie.title,n.movie.traktId)})}function be(t){return kt["\u0275vid"](0,[(t()(),kt["\u0275eld"](0,0,null,null,1,"app-movie-button",[],null,null,null,de,pe)),kt["\u0275did"](1,49152,null,0,se,[],null,null)],null,null)}var ge=kt["\u0275ccf"]("app-movie-button",se,be,{},{},[]),ye=kt["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function ve(t){return kt["\u0275vid"](0,[(t()(),kt["\u0275eld"](0,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),kt["\u0275ted"](1,null,[" ","\n"])),kt["\u0275pid"](131072,re,[ne,kt.ChangeDetectorRef]),(t()(),kt["\u0275eld"](3,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),kt["\u0275ted"](-1,null,["My plugin"]))],null,function(t,e){t(e,1,0,kt["\u0275unv"](e,1,0,kt["\u0275nov"](e,2).transform("settings.title")))})}function me(t){return kt["\u0275vid"](0,[(t()(),kt["\u0275eld"](0,0,null,null,1,"app-settings",[],null,null,null,ve,ye)),kt["\u0275did"](1,114688,null,0,ae,[ue.ModalController,ne],null,null)],function(t,e){t(e,1,0)},null)}var _e=kt["\u0275ccf"]("app-settings",ae,me,{},{},[]),we=kt["\u0275cmf"](ce,[],function(t){return kt["\u0275mod"]([kt["\u0275mpd"](512,kt.ComponentFactoryResolver,kt["\u0275CodegenComponentFactoryResolver"],[[8,[ge,_e]],[3,kt.ComponentFactoryResolver],kt.NgModuleRef]),kt["\u0275mpd"](4608,le.NgLocalization,le.NgLocaleLocalization,[kt.LOCALE_ID,[2,le["\u0275angular_packages_common_common_a"]]]),kt["\u0275mpd"](4608,ue.AngularDelegate,ue.AngularDelegate,[kt.NgZone,kt.ApplicationRef]),kt["\u0275mpd"](4608,ue.ModalController,ue.ModalController,[ue.AngularDelegate,kt.ComponentFactoryResolver,kt.Injector]),kt["\u0275mpd"](4608,ue.PopoverController,ue.PopoverController,[ue.AngularDelegate,kt.ComponentFactoryResolver,kt.Injector]),kt["\u0275mpd"](5120,kt.APP_INITIALIZER,function(t,e){return[ue["\u0275e"](t,e)]},[ue["\u0275a"],le.DOCUMENT]),kt["\u0275mpd"](4608,Ft,Bt,[]),kt["\u0275mpd"](4608,Qt,Jt,[]),kt["\u0275mpd"](4608,Gt,Zt,[]),kt["\u0275mpd"](4608,Wt,zt,[]),kt["\u0275mpd"](4608,Xt,Xt,[]),kt["\u0275mpd"](4608,ne,ne,[Xt,Ft,Qt,Gt,Wt,ee,te]),kt["\u0275mpd"](4608,ie,ie,[ne]),kt["\u0275mpd"](1073742336,le.CommonModule,le.CommonModule,[]),kt["\u0275mpd"](1073742336,ue.IonicModule,ue.IonicModule,[]),kt["\u0275mpd"](1073742336,oe,oe,[]),kt["\u0275mpd"](1073742336,ce,ce,[]),kt["\u0275mpd"](256,ue["\u0275a"],void 0,[]),kt["\u0275mpd"](256,te,void 0,[]),kt["\u0275mpd"](256,ee,void 0,[])])});n.d(e,"PluginModule",function(){return ce}),n.d(e,"PluginModuleNgFactory",function(){return we}),e.default=we}})});